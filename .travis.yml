os: linux
dist: bionic #https://docs.travis-ci.com/user/reference/overview/
language: bash
services:
  - docker
addons:
  apt:
    packages:
      - docker-ce
matrix:
  include:
#########################################
####  Forked and fixed images
#########################################
    - name: Zabbix [Agent + Java Gateway + Server with MySQL + Web Apache2 with MySQL]
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/zabbix-agent:latest zabbix/agent
      - docker push epicmorg/zabbix-agent:latest
 
      - docker build --compress -t epicmorg/zabbix-java-gateway:latest zabbix/java-gateway
      - docker push epicmorg/zabbix-java-gateway:latest
 
      - docker build --compress -t epicmorg/zabbix-server-mysql:latest zabbix/server
      - docker push epicmorg/zabbix-server-mysql:latest
 
      - docker build --compress -t epicmorg/zabbix-web-apache-mysql:latest zabbix/web
      - docker push epicmorg/zabbix-web-apache-mysql:latest

##########

    - name: NextCloud (latest, 16, 17, 18)
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/nextcloud:latest nextcloud/latest
      - docker push epicmorg/nextcloud:latest
      
      - docker build --compress -t epicmorg/nextcloud:16 nextcloud/16
      - docker push epicmorg/nextcloud:16
       
      - docker build --compress -t epicmorg/nextcloud:17 nextcloud/17
      - docker push epicmorg/nextcloud:17
      
      - docker build --compress -t epicmorg/nextcloud:18 nextcloud/18
      - docker push epicmorg/nextcloud:18
      
#########################################
####  Our High priority images
#########################################

#    - name: Template
#      script:
#      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
#      - docker build --compress -t user/repo:tag path/to/folder/contains/dockerfile
#      - docker push user/repo:tag

    - name: Base Production + JDK 6, 7, 8 11
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/prod:latest epicmorg/prod/main
      - docker push epicmorg/prod:latest

      - docker build --compress -t epicmorg/prod:jdk6 epicmorg/prod/jdk6
      - docker push epicmorg/prod:jdk6

      - docker build --compress -t epicmorg/prod:jdk7 epicmorg/prod/jdk7
      - docker push epicmorg/prod:jdk7

      - docker build --compress -t epicmorg/prod:jdk8 epicmorg/prod/jdk8
      - docker push epicmorg/prod:jdk8

      - docker build --compress -t epicmorg/prod:jdk11 epicmorg/prod/jdk11
      - docker push epicmorg/prod:jdk11

##########

    - name: Base Edge + JDK 6, 7, 8 11
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/edge:latest epicmorg/edge/main
      - docker push epicmorg/edge:latest

      - docker build --compress -t epicmorg/edge:jdk6 epicmorg/edge/jdk6
      - docker push epicmorg/edge:jdk6

      - docker build --compress -t epicmorg/edge:jdk7 epicmorg/edge/jdk7
      - docker push epicmorg/edge:jdk7

      - docker build --compress -t epicmorg/edge:jdk8 epicmorg/edge/jdk8
      - docker push epicmorg/edge:jdk8

      - docker build --compress -t epicmorg/edge:jdk11 epicmorg/edge/jdk11
      - docker push epicmorg/edge:jdk11

##########

    - name: Base Develop JDK 6, 7, 8 11
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/devel:latest epicmorg/devel/main
      - docker push epicmorg/devel:latest

      - docker build --compress -t epicmorg/devel:jdk6 epicmorg/devel/jdk6
      - docker push epicmorg/devel:jdk6

      - docker build --compress -t epicmorg/devel:jdk7 epicmorg/devel/jdk7
      - docker push epicmorg/devel:jdk7

      - docker build --compress -t epicmorg/devel:jdk8 epicmorg/devel/jdk8
      - docker push epicmorg/devel:jdk8

      - docker build --compress -t epicmorg/devel:jdk11 epicmorg/devel/jdk11
      - docker push epicmorg/devel:jdk11

##########

    - name: TeamCity Agent
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/teamcity-agent:latest teamcity-agent
      - docker push epicmorg/teamcity-agent:latest

    - name: NGinx (latest)
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/balancer:latest balancer/latest
      - docker push epicmorg/balancer:latest

    - name: NGinx + PHP7.3
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/balancer:php balancer/php
      - docker push epicmorg/balancer:php


    - name: Apache + PHP7.3
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/websites:latest websites/latest
      - docker push epicmorg/websites:latest

    - name: Apache + PHP7.2
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/websites:php7.2 websites/php7.2
      - docker push epicmorg/websites:php7.2

##########

    - name: PostgresSQL (latest)
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/postgres:latest postgres/latest
      - docker push epicmorg/postgres:latest


##########

    - name: Bitbucket (latest)
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/bitbucket:latest atlassian/bitbucket/latest
      - docker push epicmorg/bitbucket:latest
      - docker build --compress -t epicmorg/bitbucket:latest-jdk11 -f atlassian/bitbucket/latest/Dockerfile.jdk11 atlassian/bitbucket/latest
      - docker push epicmorg/bitbucket:latest-jdk11

    - name: Confluence (latest)
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/confluence:latest atlassian/confluence/latest
      - docker push epicmorg/confluence:latest
      - docker build --compress -t epicmorg/confluence:latest-jdk11 -f atlassian/confluence/latest/Dockerfile.jdk11 atlassian/confluence/latest
      - docker push epicmorg/confluence:latest-jdk11


      - docker build --compress -t epicmorg/jira:latest atlassian/jira/latest
      - docker push epicmorg/jira:latest
      - docker build --compress -t epicmorg/jira:latest-jdk11 -f atlassian/jira/latest/Dockerfile.jdk11 atlassian/jira/latest
      - docker push epicmorg/jira:latest-jdk11

    - name: Postgres (latest)
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/postgres:latest postgres/latest
      - docker push epicmorg/postgres:latest

 ##########

    - name: qBitTorrent [latest + unstable + stable]
      script:
      - echo "$DOCKER_PASSWORD" | docker login -u "$DOCKER_USERNAME" --password-stdin
      - docker build --compress -t epicmorg/qbittorrent:latest qbittorrent/latest
      - docker push epicmorg/qbittorrent:latest
 
      - docker build --compress -t epicmorg/qbittorrent:unstable qbittorrent/latest
      - docker push epicmorg/qbittorrent:unstable
 
      - docker build --compress -t epicmorg/qbittorrent:stable qbittorrent/stable
      - docker push epicmorg/qbittorrent:stable
 



#########################################
####  Our minor priority images
#########################################

